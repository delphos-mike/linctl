# Sandboxes in Modal

Modal provides a direct interface for defining containers at runtime and securely running arbitrary code inside them.

## Use Cases

Sandboxes are useful for:
- Executing code generated by language models
- Creating isolated environments for untrusted code
- Checking out git repositories and running commands
- Running containers with custom dependencies and setup scripts

## Basic Example

```python
import modal

app = modal.App.lookup("my-app", create_if_missing=True)

sb = modal.Sandbox.create(app=app)

p = sb.exec("python", "-c", "print('hello')", timeout=3)
print(p.stdout.read())

p = sb.exec("bash", "-c", "for i in {1..10}; do date +%T; sleep 0.5; done", timeout=5)
for line in p.stdout:
    print(line, end="")

sb.terminate()
```

## Running with an Entrypoint

You can run a Sandbox with a specific command as its entrypoint:

```python
sb = modal.Sandbox.create("python", "-m", "http.server", "8080", app=my_app, timeout=10)
for line in sb.stdout:
    print(line, end="")
```

## Referencing Sandboxes

Retrieve a Sandbox using its ID:

```python
sb = modal.Sandbox.create(app=my_app)
sb_id = sb.object_id

# Later in the program
sb2 = modal.Sandbox.from_id(sb_id)
p = sb2.exec("echo", "hello")
print(p.stdout.read())
sb2.terminate()
```

## Parameters and Configuration

Sandboxes support most configuration options of Modal Functions:

```python
sb = modal.Sandbox.create(
    image=modal.Image.debian_slim().pip_install("pandas"),
    volumes={"/data": modal.Volume.from_name("my-volume")},
    workdir="/repo",
    app=my_app,
)
```

### Environment Variables

Set environment variables using secrets:

```python
secret = modal.Secret.from_dict({"MY_VAR": "my_value"})
sb = modal.Sandbox.create(secrets=[secret], app=my_app)
```